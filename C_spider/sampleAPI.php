<?php
//禁用错误报告
error_reporting(0);
header('Content-Type:application/json');  //此声明非常重要
header("charset=utf-8");

$app=$_GET["app"];
$date=$_GET["date"];

if(!isset($_GET["appkey"]))
{
	echo("{\"success\":\"0\",\"msgid\":\"1000555\",\"msg\":\"Parameter appkey or sign invalid.\"}");
}

if(!isset($_GET["sign"]))
{
	echo("{\"success\":\"0\",\"msgid\":\"1000553\",\"msg\":\"sign效验失败\"}");
}

#http://api.k780.com/?app=weather.history&weaid=1&date=20150720&appkey=10003&sign=b59bc3ef6191eb9f747dd4e83c99f2a4&format=json
if ($app == "weather.history") {
	if(isset($_GET['date'])){
		echo "{\"success\":\"1\",\"result\":[{\"weaid\":\"1\",\"week\":\"星期一\",\"cityno\":\"beijing\",\"citynm\":\"北京\",\"cityid\":\"101010100\",\"uptime\":\"2015-07-20 00:50:00\",\"temperature\":\"22℃\",\"humidity\":\"97%\",\"aqi\":\"101\",\"weather\":\"晴\",\"weather_icon\":\"http://api.k780.com/upload/weather/d/0.gif\",\"wind\":\"东北风\",\"winp\":\"1级\",\"temp\":\"22\",\"weatid\":\"1\",\"windid\":\"13\",\"winpid\":\"201\",\"weather_iconid\":\"0\"},{\"weaid\":\"1\",\"week\":\"星期一\",\"cityno\":\"beijing\",\"citynm\":\"北京\",\"cityid\":\"101010100\",\"uptime\":\"2015-07-20 01:50:00\",\"temperature\":\"22℃\",\"humidity\":\"99%\",\"aqi\":\"102\",\"weather\":\"晴\",\"weather_icon\":\"http://api.k780.com/upload/weather/d/0.gif\",\"wind\":\"东北风\",\"winp\":\"1级\",\"temp\":\"22\",\"weatid\":\"1\",\"windid\":\"13\",\"winpid\":\"201\",\"weather_iconid\":\"0\"},{\"weaid\":\"1\",\"week\":\"星期一\",\"cityno\":\"beijing\",\"citynm\":\"北京\",\"cityid\":\"101010100\",\"uptime\":\"2015-07-20 02:50:00\",\"temperature\":\"22℃\",\"humidity\":\"99%\",\"aqi\":\"106\",\"weather\":\"晴\",\"weather_icon\":\"http://api.k780.com/upload/weather/d/0.gif\",\"wind\":\"东风\",\"winp\":\"2级\",\"temp\":\"22\",\"weatid\":\"1\",\"windid\":\"10\",\"winpid\":\"203\",\"weather_iconid\":\"0\"},{\"weaid\":\"1\",\"week\":\"星期一\",\"cityno\":\"beijing\",\"citynm\":\"北京\",\"cityid\":\"101010100\",\"uptime\":\"2015-07-20 03:45:00\",\"temperature\":\"22℃\",\"humidity\":\"99%\",\"aqi\":\"105\",\"weather\":\"晴\",\"weather_icon\":\"http://api.k780.com/upload/weather/d/0.gif\",\"wind\":\"东南风\",\"winp\":\"2级\",\"temp\":\"22\",\"weatid\":\"1\",\"windid\":\"12\",\"winpid\":\"203\",\"weather_iconid\":\"0\"},{\"weaid\":\"1\",\"week\":\"星期一\",\"cityno\":\"beijing\",\"citynm\":\"北京\",\"cityid\":\"101010100\",\"uptime\":\"2015-07-20 04:50:00\",\"temperature\":\"22℃\",\"humidity\":\"99%\",\"aqi\":\"106\",\"weather\":\"雷阵雨\",\"weather_icon\":\"http://api.k780.com/upload/weather/d/4.gif\",\"wind\":\"北风\",\"winp\":\"1级\",\"temp\":\"22\",\"weatid\":\"5\",\"windid\":\"20\",\"winpid\":\"201\",\"weather_iconid\":\"4\"},{\"weaid\":\"1\",\"week\":\"星期一\",\"cityno\":\"beijing\",\"citynm\":\"北京\",\"cityid\":\"101010100\",\"uptime\":\"2015-07-20 05:50:00\",\"temperature\":\"22℃\",\"humidity\":\"99%\",\"aqi\":\"102\",\"weather\":\"雷阵雨\",\"weather_icon\":\"http://api.k780.com/upload/weather/d/4.gif\",\"wind\":\"北风\",\"winp\":\"1级\",\"temp\":\"22\",\"weatid\":\"5\",\"windid\":\"20\",\"winpid\":\"201\",\"weather_iconid\":\"4\"},{\"weaid\":\"1\",\"week\":\"星期一\",\"cityno\":\"beijing\",\"citynm\":\"北京\",\"cityid\":\"101010100\",\"uptime\":\"2015-07-20 06:50:00\",\"temperature\":\"23℃\",\"humidity\":\"99%\",\"aqi\":\"95\",\"weather\":\"雷阵雨\",\"weather_icon\":\"http://api.k780.com/upload/weather/d/4.gif\",\"wind\":\"东风\",\"winp\":\"1级\",\"temp\":\"23\",\"weatid\":\"5\",\"windid\":\"10\",\"winpid\":\"201\",\"weather_iconid\":\"4\"},{\"weaid\":\"1\",\"week\":\"星期一\",\"cityno\":\"beijing\",\"citynm\":\"北京\",\"cityid\":\"101010100\",\"uptime\":\"2015-07-20 07:50:00\",\"temperature\":\"23℃\",\"humidity\":\"90%\",\"aqi\":\"93\",\"weather\":\"雷阵雨\",\"weather_icon\":\"http://api.k780.com/upload/weather/d/4.gif\",\"wind\":\"东风\",\"winp\":\"2级\",\"temp\":\"23\",\"weatid\":\"5\",\"windid\":\"10\",\"winpid\":\"203\",\"weather_iconid\":\"4\"},{\"weaid\":\"1\",\"week\":\"星期一\",\"cityno\":\"beijing\",\"citynm\":\"北京\",\"cityid\":\"101010100\",\"uptime\":\"2015-07-20 08:45:00\",\"temperature\":\"24℃\",\"humidity\":\"84%\",\"aqi\":\"88\",\"weather\":\"雷阵雨\",\"weather_icon\":\"http://api.k780.com/upload/weather/d/4.gif\",\"wind\":\"东南风\",\"winp\":\"1级\",\"temp\":\"24\",\"weatid\":\"5\",\"windid\":\"12\",\"winpid\":\"201\",\"weather_iconid\":\"4\"},{\"weaid\":\"1\",\"week\":\"星期一\",\"cityno\":\"beijing\",\"citynm\":\"北京\",\"cityid\":\"101010100\",\"uptime\":\"2015-07-20 09:40:00\",\"temperature\":\"25℃\",\"humidity\":\"75%\",\"aqi\":\"90\",\"weather\":\"雷阵雨\",\"weather_icon\":\"http://api.k780.com/upload/weather/d/4.gif\",\"wind\":\"东风\",\"winp\":\"2级\",\"temp\":\"25\",\"weatid\":\"5\",\"windid\":\"10\",\"winpid\":\"203\",\"weather_iconid\":\"4\"},{\"weaid\":\"1\",\"week\":\"星期一\",\"cityno\":\"beijing\",\"citynm\":\"北京\",\"cityid\":\"101010100\",\"uptime\":\"2015-07-20 10:55:00\",\"temperature\":\"26℃\",\"humidity\":\"70%\",\"aqi\":\"92\",\"weather\":\"雷阵雨\",\"weather_icon\":\"http://api.k780.com/upload/weather/d/4.gif\",\"wind\":\"东南风\",\"winp\":\"1级\",\"temp\":\"26\",\"weatid\":\"5\",\"windid\":\"12\",\"winpid\":\"201\",\"weather_iconid\":\"4\"},{\"weaid\":\"1\",\"week\":\"星期一\",\"cityno\":\"beijing\",\"citynm\":\"北京\",\"cityid\":\"101010100\",\"uptime\":\"2015-07-20 11:35:00\",\"temperature\":\"27℃\",\"humidity\":\"69%\",\"aqi\":\"93\",\"weather\":\"雷阵雨\",\"weather_icon\":\"http://api.k780.com/upload/weather/d/4.gif\",\"wind\":\"东风\",\"winp\":\"2级\",\"temp\":\"27\",\"weatid\":\"5\",\"windid\":\"10\",\"winpid\":\"203\",\"weather_iconid\":\"4\"},{\"weaid\":\"1\",\"week\":\"星期一\",\"cityno\":\"beijing\",\"citynm\":\"北京\",\"cityid\":\"101010100\",\"uptime\":\"2015-07-20 12:55:00\",\"temperature\":\"27℃\",\"humidity\":\"66%\",\"aqi\":\"106\",\"weather\":\"晴\",\"weather_icon\":\"http://api.k780.com/upload/weather/d/0.gif\",\"wind\":\"西南风\",\"winp\":\"2级\",\"temp\":\"27\",\"weatid\":\"1\",\"windid\":\"16\",\"winpid\":\"203\",\"weather_iconid\":\"0\"},{\"weaid\":\"1\",\"week\":\"星期一\",\"cityno\":\"beijing\",\"citynm\":\"北京\",\"cityid\":\"101010100\",\"uptime\":\"2015-07-20 13:55:00\",\"temperature\":\"28℃\",\"humidity\":\"65%\",\"aqi\":\"115\",\"weather\":\"雷阵雨\",\"weather_icon\":\"http://api.k780.com/upload/weather/d/4.gif\",\"wind\":\"西南风\",\"winp\":\"2级\",\"temp\":\"28\",\"weatid\":\"5\",\"windid\":\"16\",\"winpid\":\"203\",\"weather_iconid\":\"4\"},{\"weaid\":\"1\",\"week\":\"星期一\",\"cityno\":\"beijing\",\"citynm\":\"北京\",\"cityid\":\"101010100\",\"uptime\":\"2015-07-20 14:50:00\",\"temperature\":\"29℃\",\"humidity\":\"62%\",\"aqi\":\"121\",\"weather\":\"晴\",\"weather_icon\":\"http://api.k780.com/upload/weather/d/0.gif\",\"wind\":\"东风\",\"winp\":\"1级\",\"temp\":\"29\",\"weatid\":\"1\",\"windid\":\"10\",\"winpid\":\"201\",\"weather_iconid\":\"0\"},{\"weaid\":\"1\",\"week\":\"星期一\",\"cityno\":\"beijing\",\"citynm\":\"北京\",\"cityid\":\"101010100\",\"uptime\":\"2015-07-20 15:45:00\",\"temperature\":\"29℃\",\"humidity\":\"59%\",\"aqi\":\"126\",\"weather\":\"雷阵雨\",\"weather_icon\":\"http://api.k780.com/upload/weather/d/4.gif\",\"wind\":\"西南风\",\"winp\":\"2级\",\"temp\":\"29\",\"weatid\":\"5\",\"windid\":\"16\",\"winpid\":\"203\",\"weather_iconid\":\"4\"},{\"weaid\":\"1\",\"week\":\"星期一\",\"cityno\":\"beijing\",\"citynm\":\"北京\",\"cityid\":\"101010100\",\"uptime\":\"2015-07-20 16:50:00\",\"temperature\":\"29℃\",\"humidity\":\"61%\",\"aqi\":\"128\",\"weather\":\"晴\",\"weather_icon\":\"http://api.k780.com/upload/weather/d/0.gif\",\"wind\":\"西南风\",\"winp\":\"2级\",\"temp\":\"29\",\"weatid\":\"1\",\"windid\":\"16\",\"winpid\":\"203\",\"weather_iconid\":\"0\"},{\"weaid\":\"1\",\"week\":\"星期一\",\"cityno\":\"beijing\",\"citynm\":\"北京\",\"cityid\":\"101010100\",\"uptime\":\"2015-07-20 17:50:00\",\"temperature\":\"29℃\",\"humidity\":\"61%\",\"aqi\":\"121\",\"weather\":\"晴\",\"weather_icon\":\"http://api.k780.com/upload/weather/d/0.gif\",\"wind\":\"南风\",\"winp\":\"2级\",\"temp\":\"29\",\"weatid\":\"1\",\"windid\":\"5\",\"winpid\":\"203\",\"weather_iconid\":\"0\"},{\"weaid\":\"1\",\"week\":\"星期一\",\"cityno\":\"beijing\",\"citynm\":\"北京\",\"cityid\":\"101010100\",\"uptime\":\"2015-07-20 18:50:00\",\"temperature\":\"28℃\",\"humidity\":\"65%\",\"aqi\":\"122\",\"weather\":\"晴\",\"weather_icon\":\"http://api.k780.com/upload/weather/d/0.gif\",\"wind\":\"南风\",\"winp\":\"2级\",\"temp\":\"28\",\"weatid\":\"1\",\"windid\":\"5\",\"winpid\":\"203\",\"weather_iconid\":\"0\"},{\"weaid\":\"1\",\"week\":\"星期一\",\"cityno\":\"beijing\",\"citynm\":\"北京\",\"cityid\":\"101010100\",\"uptime\":\"2015-07-20 19:55:00\",\"temperature\":\"27℃\",\"humidity\":\"69%\",\"aqi\":\"121\",\"weather\":\"晴\",\"weather_icon\":\"http://api.k780.com/upload/weather/d/0.gif\",\"wind\":\"南风\",\"winp\":\"2级\",\"temp\":\"27\",\"weatid\":\"1\",\"windid\":\"5\",\"winpid\":\"203\",\"weather_iconid\":\"0\"},{\"weaid\":\"1\",\"week\":\"星期一\",\"cityno\":\"beijing\",\"citynm\":\"北京\",\"cityid\":\"101010100\",\"uptime\":\"2015-07-20 20:45:00\",\"temperature\":\"26℃\",\"humidity\":\"74%\",\"aqi\":\"122\",\"weather\":\"晴\",\"weather_icon\":\"http://api.k780.com/upload/weather/d/0.gif\",\"wind\":\"西南风\",\"winp\":\"1级\",\"temp\":\"26\",\"weatid\":\"1\",\"windid\":\"16\",\"winpid\":\"201\",\"weather_iconid\":\"0\"},{\"weaid\":\"1\",\"week\":\"星期一\",\"cityno\":\"beijing\",\"citynm\":\"北京\",\"cityid\":\"101010100\",\"uptime\":\"2015-07-20 21:45:00\",\"temperature\":\"26℃\",\"humidity\":\"75%\",\"aqi\":\"131\",\"weather\":\"晴\",\"weather_icon\":\"http://api.k780.com/upload/weather/d/0.gif\",\"wind\":\"南风\",\"winp\":\"2级\",\"temp\":\"26\",\"weatid\":\"1\",\"windid\":\"5\",\"winpid\":\"203\",\"weather_iconid\":\"0\"},{\"weaid\":\"1\",\"week\":\"星期一\",\"cityno\":\"beijing\",\"citynm\":\"北京\",\"cityid\":\"101010100\",\"uptime\":\"2015-07-20 22:50:00\",\"temperature\":\"26℃\",\"humidity\":\"78%\",\"aqi\":\"143\",\"weather\":\"晴\",\"weather_icon\":\"http://api.k780.com/upload/weather/d/0.gif\",\"wind\":\"南风\",\"winp\":\"2级\",\"temp\":\"26\",\"weatid\":\"1\",\"windid\":\"5\",\"winpid\":\"203\",\"weather_iconid\":\"0\"},{\"weaid\":\"1\",\"week\":\"星期一\",\"cityno\":\"beijing\",\"citynm\":\"北京\",\"cityid\":\"101010100\",\"uptime\":\"2015-07-20 23:45:00\",\"temperature\":\"25℃\",\"humidity\":\"82%\",\"aqi\":\"161\",\"weather\":\"晴\",\"weather_icon\":\"http://api.k780.com/upload/weather/d/0.gif\",\"wind\":\"南风\",\"winp\":\"2级\",\"temp\":\"25\",\"weatid\":\"1\",\"windid\":\"5\",\"winpid\":\"203\",\"weather_iconid\":\"0\"}]}";
	}else{
		echo "{\"success\":\"0\",\"msgid\":\"1060010\",\"msg\":\"获取历史天气数据,必须指定日期(date)\"}";
	}
}



else if ($app == "weather.today") 
{
		echo "{\"success\":\"1\",\"result\":{\"weaid\":\"1\",\"days\":\"2019-07-24\",\"week\":\"星期三\",\"cityno\":\"beijing\",\"citynm\":\"北京\",\"cityid\":\"101010100\",\"temperature\":\"36℃/27℃\",\"temperature_curr\":\"34℃\",\"humidity\":\"56%\",\"aqi\":\"74\",\"weather\":\"多云转雷阵雨\",\"weather_curr\":\"晴\",\"weather_icon\":\"http://api.k780.com/upload/weather/d/0.gif\",\"weather_icon1\":\"\",\"wind\":\"东北风\",\"winp\":\"2级\",\"temp_high\":\"36\",\"temp_low\":\"27\",\"temp_curr\":\"34\",\"humi_high\":\"0\",\"humi_low\":\"0\",\"weatid\":\"1\",\"weatid1\":\"\",\"windid\":\"1\",\"winpid\":\"2\",\"weather_iconid\":\"0\"}}";
}
else if($app == "weather.future")
{
		echo "{\"success\":\"1\",\"result\":[{\"weaid\":\"1\",\"days\":\"2019-07-24\",\"week\":\"星期三\",\"cityno\":\"beijing\",\"citynm\":\"北京\",\"cityid\":\"101010100\",\"temperature\":\"36℃/27℃\",\"humidity\":\"0%/0%\",\"weather\":\"多云转雷阵雨\",\"weather_icon\":\"http://api.k780.com/upload/weather/d/1.gif\",\"weather_icon1\":\"http://api.k780.com/upload/weather/n/4.gif\",\"wind\":\"南风\",\"winp\":\"小于3级\",\"temp_high\":\"36\",\"temp_low\":\"27\",\"humi_high\":\"0\",\"humi_low\":\"0\",\"weatid\":\"2\",\"weatid1\":\"5\",\"windid\":\"4\",\"winpid\":\"0\",\"weather_iconid\":\"1\",\"weather_iconid1\":\"4\"},{\"weaid\":\"1\",\"days\":\"2019-07-25\",\"week\":\"星期四\",\"cityno\":\"beijing\",\"citynm\":\"北京\",\"cityid\":\"101010100\",\"temperature\":\"33℃/26℃\",\"humidity\":\"0%/0%\",\"weather\":\"多云转晴\",\"weather_icon\":\"http://api.k780.com/upload/weather/d/1.gif\",\"weather_icon1\":\"http://api.k780.com/upload/weather/n/0.gif\",\"wind\":\"南风转东南风\",\"winp\":\"小于3级\",\"temp_high\":\"33\",\"temp_low\":\"26\",\"humi_high\":\"0\",\"humi_low\":\"0\",\"weatid\":\"2\",\"weatid1\":\"1\",\"windid\":\"4\",\"winpid\":\"0\",\"weather_iconid\":\"1\",\"weather_iconid1\":\"0\"},{\"weaid\":\"1\",\"days\":\"2019-07-26\",\"week\":\"星期五\",\"cityno\":\"beijing\",\"citynm\":\"北京\",\"cityid\":\"101010100\",\"temperature\":\"35℃/27℃\",\"humidity\":\"0%/0%\",\"weather\":\"晴\",\"weather_icon\":\"http://api.k780.com/upload/weather/d/0.gif\",\"weather_icon1\":\"http://api.k780.com/upload/weather/n/0.gif\",\"wind\":\"南风\",\"winp\":\"小于3级\",\"temp_high\":\"35\",\"temp_low\":\"27\",\"humi_high\":\"0\",\"humi_low\":\"0\",\"weatid\":\"1\",\"weatid1\":\"1\",\"windid\":\"4\",\"winpid\":\"0\",\"weather_iconid\":\"0\",\"weather_iconid1\":\"0\"},{\"weaid\":\"1\",\"days\":\"2019-07-27\",\"week\":\"星期六\",\"cityno\":\"beijing\",\"citynm\":\"北京\",\"cityid\":\"101010100\",\"temperature\":\"34℃/26℃\",\"humidity\":\"0%/0%\",\"weather\":\"多云转雷阵雨\",\"weather_icon\":\"http://api.k780.com/upload/weather/d/1.gif\",\"weather_icon1\":\"http://api.k780.com/upload/weather/n/4.gif\",\"wind\":\"东南风\",\"winp\":\"小于3级\",\"temp_high\":\"34\",\"temp_low\":\"26\",\"humi_high\":\"0\",\"humi_low\":\"0\",\"weatid\":\"2\",\"weatid1\":\"5\",\"windid\":\"3\",\"winpid\":\"0\",\"weather_iconid\":\"1\",\"weather_iconid1\":\"4\"},{\"weaid\":\"1\",\"days\":\"2019-07-28\",\"week\":\"星期日\",\"cityno\":\"beijing\",\"citynm\":\"北京\",\"cityid\":\"101010100\",\"temperature\":\"31℃/25℃\",\"humidity\":\"0%/0%\",\"weather\":\"多云\",\"weather_icon\":\"http://api.k780.com/upload/weather/d/1.gif\",\"weather_icon1\":\"http://api.k780.com/upload/weather/n/1.gif\",\"wind\":\"南风\",\"winp\":\"小于3级\",\"temp_high\":\"31\",\"temp_low\":\"25\",\"humi_high\":\"0\",\"humi_low\":\"0\",\"weatid\":\"2\",\"weatid1\":\"2\",\"windid\":\"4\",\"winpid\":\"0\",\"weather_iconid\":\"1\",\"weather_iconid1\":\"1\"},{\"weaid\":\"1\",\"days\":\"2019-07-29\",\"week\":\"星期一\",\"cityno\":\"beijing\",\"citynm\":\"北京\",\"cityid\":\"101010100\",\"temperature\":\"33℃/27℃\",\"humidity\":\"0%/0%\",\"weather\":\"多云转阴\",\"weather_icon\":\"http://api.k780.com/upload/weather/d/1.gif\",\"weather_icon1\":\"http://api.k780.com/upload/weather/n/2.gif\",\"wind\":\"南风\",\"winp\":\"小于3级\",\"temp_high\":\"33\",\"temp_low\":\"27\",\"humi_high\":\"0\",\"humi_low\":\"0\",\"weatid\":\"2\",\"weatid1\":\"3\",\"windid\":\"4\",\"winpid\":\"0\",\"weather_iconid\":\"1\",\"weather_iconid1\":\"2\"},{\"weaid\":\"1\",\"days\":\"2019-07-30\",\"week\":\"星期二\",\"cityno\":\"beijing\",\"citynm\":\"北京\",\"cityid\":\"101010100\",\"temperature\":\"33℃/25℃\",\"humidity\":\"0%/0%\",\"weather\":\"多云\",\"weather_icon\":\"http://api.k780.com/upload/weather/d/1.gif\",\"weather_icon1\":\"http://api.k780.com/upload/weather/n/1.gif\",\"wind\":\"南风\",\"winp\":\"小于3级\",\"temp_high\":\"33\",\"temp_low\":\"25\",\"humi_high\":\"0\",\"humi_low\":\"0\",\"weatid\":\"2\",\"weatid1\":\"2\",\"windid\":\"4\",\"winpid\":\"0\",\"weather_iconid\":\"1\",\"weather_iconid1\":\"1\"}]}";
}

else
	echo ("{\"success\":\"0\",\"msgid\":\"1000501\",\"msg\":\"请求接口不存在\"}");


?>